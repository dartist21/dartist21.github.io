{"version":3,"sources":["app.js","lib/form.js","lib/pagination.js","pages/404.js","pages/final.js","pages/step1.js","pages/step2.js","pages/step3.js","pages/step4.js"],"names":[],"mappings":"AAAA;AACA;ECDA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;ECjCA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EClFA;EACA;EACA;EACA;EACA;ECJA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EChCA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;ECtDA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;ECtCA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EC/GA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AR3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["(function () {\n\n  //=require 'lib/*'\n  //=require 'pages/*'\n\n  const rootElement = document.querySelector('#root');\n\n\n  rootElement.innerHTML = templates['step1']();\n\n  page('/step1', step1);\n  page('/step2', step2);\n  page('/step3', step3);\n  page('/step4', step4);\n  page('/final', final);\n  page('*', notfound);\n  page();\n\n})();\n","class Form {\n  constructor(data) {\n    this.data = Object.assign({}, Form.defaultData, data);\n\n    this.username = this.data.username;\n    this.email = this.data.email;\n    this.city = this.data.city;\n    this.country = this.data.country;\n    this.fb = this.data.fb;\n    this.vk = this.data.vk;\n    this.tw = this.data.tw;\n    this.ok = this.data.ok;\n    this.catUrl = this.data.catUrl;\n  }\n\n  setInformation (name, arg) {\n      this[name] = arg;\n  }\n}\n\nForm.defaultData = {\n  username: null,\n  email: null,\n  city: 'Kyiv',\n  country: 'Ukraine',\n  fb: null,\n  vk: null,\n  tw: null,\n  ok: null,\n  catUrl: null\n};\n\nlet questionnaire = new Form();\n","function pagination(curStep) {\n  let pagItems = document.querySelectorAll('.pag-num__page');\n  let prev = document.querySelector('#prev');\n  let next = document.querySelector('#next');\n  let final = document.querySelector('#final');\n\n  for (let i = 0; i < pagItems.length; i++) {\n    pagItems[i].addEventListener('click', changePage);\n  }\n\n  if (prev) {\n    prev.addEventListener('click', goPrev);\n  }\n  if (next) {\n    next.addEventListener('click', goNext);\n  }\n  if (final) {\n    final.addEventListener('click', goFinal);\n  }\n\n\n  switch (curStep) {\n    case 1:\n      prev.classList.add('not-active');\n      for (let i = curStep; i < pagItems.length; i++) {\n        pagItems[i].classList.add('not-active');\n      }\n      break;\n    case 2:\n      for (let i = curStep - 2; i >= 0; --i) {\n        pagItems[i].classList.add('is-active');\n      }\n      for (let i = curStep; i < pagItems.length; i++) {\n        pagItems[i].classList.add('not-active');\n      }\n      break;\n    case 3:\n      for (let i = curStep - 2; i >= 0; --i) {\n        pagItems[i].classList.add('is-active');\n      }\n      for (let i = curStep; i < pagItems.length; i++) {\n        pagItems[i].classList.add('not-active');\n      }\n      break;\n    case 4:\n      for (let i = curStep - 2; i >= 0; --i) {\n        pagItems[i].classList.add('is-active');\n      }\n      for (let i = curStep; i < pagItems.length; i++) {\n        pagItems[i].classList.add('not-active');\n      }\n      break;\n    case final:\n\n        break;\n    default:\n      console.log('check pagination');\n\n  }\n\n  function changePage(e) {\n    let pagItem = e.target;\n    let pagItemNum = pagItem.dataset.value;\n    page.redirect('/step' + pagItemNum);\n  }\n\n  function goPrev() {\n    prevStep = --curStep;\n    page.redirect('/step' + prevStep);\n  }\n\n  function goNext() {\n    nextStep = ++curStep;\n    page.redirect('/step' + nextStep);\n  }\n\n  function goFinal() {\n    page.redirect('/final');\n  }\n\n\n}\n","function notfound() {\n  console.log('notfound');\n    rootElement.innerHTML = templates['404']();\n}\n","function final() {\n  rootElement.innerHTML = templates['final']();\n\n  nameEl =      rootElement.querySelector('.card-name');\n  emailEl =     rootElement.querySelector('.card-email');\n  locationEl =  rootElement.querySelector('.card-location');\n  fbEl =        rootElement.querySelector('.card-fb');\n  vkEl =        rootElement.querySelector('.card-vk');\n  twEl =        rootElement.querySelector('.card-tw');\n  okEl =        rootElement.querySelector('.card-ok');\n  catEl =       rootElement.querySelector('.card-img');\n\n\n  nameEl.innerHTML = questionnaire.username;\n  emailEl.innerHTML = questionnaire.email;\n  locationEl.innerHTML = questionnaire.country + ' , ' + questionnaire.city;\n\n  if (fbEl) {\n    fbEl.innerHTML = questionnaire.fb;\n  }\n  if (vkEl) {\n    vkEl.innerHTML = questionnaire.vk;\n  }\n  if (twEl) {\n    twEl.innerHTML = questionnaire.tw;\n  }\n  if (okEl) {\n    okEl.innerHTML = questionnaire.ok;\n  }\n\n  catEl.src = questionnaire.catUrl;\n}\n","function step1() {\n  rootElement.innerHTML = templates['step1']();\n\n  let curStep = 1;\n  pagination(curStep);\n\n  let nameInput = rootElement.querySelector('input[name=\"name\"]');\n  let emailInput = rootElement.querySelector('input[name=\"email\"]');\n\n  let nameError = rootElement.querySelector('#name-error')\n  let emailError = rootElement.querySelector('#email-error')\n\n  nameInput.addEventListener('focusin', resetStateName);\n  emailInput.addEventListener('focusin', resetStateEmail);\n\n  nameInput.addEventListener('focusout', validateName);\n  emailInput.addEventListener('focusout', validateEmail);\n\n  function validateName(el) {\n    let nameInputValue = el.target.value;\n\n    if (nameInputValue.length >= 2) {\n      resetStateName(el);\n      questionnaire.setInformation('username', nameInputValue);\n    } else {\n      el.target.parentNode.classList.add('not-valid-input');\n      nameError.classList.remove('display-none');\n    }\n  }\n\n  function validateEmail(el) {\n    const EMAIL_RE = /.+@.+\\..+/i;\n    let emailInputValue = el.target.value;\n\n    if (emailInputValue.length >=2 && EMAIL_RE.test(emailInputValue)) {\n      resetStateEmail(el);\n      questionnaire.setInformation('email', emailInputValue);\n\n    } else if (emailError.classList.contains('display-none')) {\n      el.target.parentNode.classList.add('not-valid-input');\n      emailError.classList.remove('display-none');\n    }\n  }\n\n  function resetStateEmail(el) {\n    emailError.classList.add('display-none');\n    el.target.parentNode.classList.remove('not-valid-input');\n  }\n\n  function resetStateName(el) {\n    nameError.classList.add('display-none');\n    el.target.parentNode.classList.remove('not-valid-input');\n  }\n}\n","function step2() {\n  rootElement.innerHTML = templates['step2']();\n\n  let curStep = 2;\n  pagination(curStep);\n\n  const cityData  = fetch('/js/json/cities.json');\n  cityData\n  .then(response => {\n    return response.json();\n   })\n  .then(data => {\n    // console.log(data);\n\n  })\n  .catch(error => {\n    console.log(error.message);\n  });\n\n  const countryData  = fetch('/js/json/countries.json');\n  countryData\n  .then(response => {\n    return response.json();\n   })\n  .then(data => {\n    // console.log(data);\n\n  })\n  .catch(error => {\n    console.log(error.message);\n  });\n\n\n\n\n\n\n}\n","function step3() {\n  rootElement.innerHTML = templates['step3']();\n\n  let curStep = 3;\n  pagination(curStep);\n\n  let checkFb = rootElement.querySelector('input[name=\"check_fb\"]');\n  let checkVk = rootElement.querySelector('input[name=\"check_vk\"]');\n  let checkTw = rootElement.querySelector('input[name=\"check_tw\"]');\n  let checkOk = rootElement.querySelector('input[name=\"check_ok\"]');\n\n  let inputFb = rootElement.querySelector('input[name=\"input_fb\"]');\n  let inputVk = rootElement.querySelector('input[name=\"input_vk\"]');\n  let inputTw = rootElement.querySelector('input[name=\"input_tw\"]');\n  let inputOk = rootElement.querySelector('input[name=\"input_ok\"]');\n\n  let urlError = rootElement.querySelector('#url-error');\n\n  checkFb.addEventListener('click', showInput);\n  checkVk.addEventListener('click', showInput);\n  checkTw.addEventListener('click', showInput);\n  checkOk.addEventListener('click', showInput);\n\n  inputFb.addEventListener('focusout', validateUrl);\n  inputVk.addEventListener('focusout', validateUrl);\n  inputTw.addEventListener('focusout', validateUrl);\n  inputOk.addEventListener('focusout', validateUrl);\n\n  inputFb.addEventListener('focusin', resetState);\n  inputVk.addEventListener('focusin', resetState);\n  inputTw.addEventListener('focusin', resetState);\n  inputOk.addEventListener('focusin', resetState);\n\n  function showInput(el) {\n    if (el.target.checked) {\n      switch (el.target.name) {\n        case 'check_fb':\n          inputFb.classList.remove('display-none');\n          break;\n        case 'check_vk':\n          inputVk.classList.remove('display-none');\n          break;\n        case 'check_tw':\n          inputTw.classList.remove('display-none');\n          break;\n        case 'check_ok':\n          inputOk.classList.remove('display-none');\n          break;\n        default:\n          console.log('errror in switch');\n          break;\n      }\n    } else {\n      switch (el.target.name) {\n        case 'check_fb':\n          inputFb.classList.add('display-none');\n          break;\n        case 'check_vk':\n          inputVk.classList.add('display-none');\n          break;\n        case 'check_tw':\n          inputTw.classList.add('display-none');\n          break;\n        case 'check_ok':\n          inputOk.classList.add('display-none');\n          break;\n        default:\n          console.log('errror in switch');\n          break;\n      }\n    }\n\n\n  }\n\n  function validateUrl(el) {\n    let URL_RE = /^[a-z]+[.]+[a-z]+[/]+[a-z0-9-_]+/i;\n    let inputValue = el.target.value;\n\n    if (inputValue.length >=6 && URL_RE.test(inputValue)) {\n      resetState(el);\n      switch (el.target.name) {\n        case 'input_fb':\n          questionnaire.setInformation('fb', inputValue);\n          break;\n        case 'input_vk':\n          questionnaire.setInformation('vk', inputValue);\n          break;\n        case 'input_tw':\n          questionnaire.setInformation('tw', inputValue);\n          break;\n        case 'input_ok':\n          questionnaire.setInformation('ok', inputValue);\n          break;\n        default:\n          console.log('errror in switch');\n          break;\n      }\n    } else if (!el.target.parentNode.classList.contains('display-none')) {\n      el.target.parentNode.classList.add('not-valid-input');\n      urlError.classList.remove('display-none');\n    }\n  }\n\n  function resetState(el) {\n    if (el.target.parentNode.classList.contains('not-valid-input')) {\n      urlError.classList.add('display-none');\n      el.target.parentNode.classList.remove('not-valid-input');\n    }\n  }\n}\n","function step4() {\n  rootElement.innerHTML = templates['step4']();\n\n  let curStep = 4;\n  pagination(curStep);\n\n  let animalImages = rootElement.querySelectorAll('.animal');\n  let animalError = rootElement.querySelector('#animal-error');\n\n  for (let i = 0; i < animalImages.length; i++) {\n    animalImages[i].addEventListener('click', checkAnimal);\n  }\n\n  function checkAnimal(el) {\n    animalError.classList.add('display-none');\n\n    for (let i = 0; i < animalImages.length; i++) {\n      animalImages[i].style.outline = '';\n    }\n\n    el.target.style.outline = '3px solid #ff9800';\n\n    if (el.target.dataset.animal === 'dog') {\n      animalError.classList.remove('display-none');\n    } else {\n      questionnaire.setInformation('catUrl', el.target.currentSrc);\n    }\n  }\n\n\n}\n"]}